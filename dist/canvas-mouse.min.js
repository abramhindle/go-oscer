/*
	canvas-mouse v. 0.5.0 alpha
	Copyright (c) 2017 Epistemex.com
	MIT license.
*/
"use strict";function CanvasMouse(h,r){if(!(h instanceof CanvasRenderingContext2D)){throw"Need a 2D canvas context."}r=Object.assign({handleScale:!1,handleTransforms:!1,matrix:null},r);var q=this,u,m=("currentTransform" in h||"mozCurrentTransform" in h),i,j,v,w,s,t,g=h.canvas,p=r.matrix,n=p?p.inverse():null,k=r.handleScale,l=r.handleTransforms,x=p?e:d;if(l&&!m&&!p){console.log("Browser doesn't support currentTransform.");l=!1}if(l&&p){p._xx=p._x;p._x=function(){n=this.inverse();return this._xx()}}function o(){var M=g.getBoundingClientRect(),J=getComputedStyle(g),L=J.getPropertyValue.bind(J),K=parseInt,D="padding-",y="border-",I="-width",F=K(L(D+"left")),G=K(L(D+"right")),H=K(L(D+"top")),E=K(L(D+"bottom")),A=K(L(y+"left"+I)),B=K(L(y+"right"+I)),C=K(L(y+"top"+I)),z=K(L(y+"bottom"+I));s=F+A;t=H+C;i=M.left+s;j=M.top+t;v=(g.width/(M.width-s-G-B))||1;w=(g.height/(M.height-t-E-z))||1}function b(){cancelAnimationFrame(u);u=requestAnimationFrame(f)}function f(){var y=g.getBoundingClientRect();i=y.left+s;j=y.top+t}function a(y){return{x:y.clientX-i,y:y.clientY-j}}function c(y){y.x*=v;y.y*=w;return y}function d(C){var B,y,A,z=h;y=(z.currentTransform||z.mozCurrentTransform);if(y instanceof SVGMatrix){y=DOMMatrix.fromMatrix(y)}B=typeof y.a==="undefined"?new DOMMatrix(y):y;A=B.invertSelf();return{x:C.x*A.a+C.y*A.c+A.e,y:C.x*A.b+C.y*A.d+A.f}}function e(y){return n.applyToPoint(y.x,y.y)}this.getPos=function(y){var z=a(y);if(k){z=c(z)}if(l){z=x(z)}return z};this.getPosXY=function(z,A){return q.getPos({clientX:z/v+i,clientY:A/w+j})};this.init=o;this.update=f;o();window.addEventListener("scroll",b);window.addEventListener("resize",b)};