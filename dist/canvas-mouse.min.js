/*
	canvas-mouse 0.6.0 alpha
	Copyright (c) 2017 Epistemex
	MIT license.
*/
"use strict";function CanvasMouse(h,s){if(!(h instanceof CanvasRenderingContext2D)){throw"Need a 2D canvas context."}s=Object.assign({handleScale:!1,handleTransforms:!1,matrix:null},s);var r=this,i=Object.defineProperty.bind(Object),w,n=("currentTransform" in h||"mozCurrentTransform" in h),j,k,x,y,t,u,g=h.canvas,q=s.matrix,o=q?q.inverse():null,l=s.handleScale,m=s.handleTransforms&&(n||q),z=q?e:d;if(m&&!n&&!q){console.log("Browser doesn't support currentTransform.");m=!1}function v(){if(q&&!q._xx){q._xx=q._x;q._x=function(){o=this.inverse();return this._xx()}}}function p(){var K=g.getBoundingClientRect(),F=getComputedStyle(g),I=F.getPropertyValue.bind(F),H=parseInt,C="padding-",A="border-",D="-width",G="left",J="right",M="top",E="bottom";t=H(I(C+G))+H(I(A+G+D));u=H(I(C+M))+H(I(A+M+D));j=K.left+t;k=K.top+u;x=(g.width/(K.width-(t+H(I(C+J))+H(I(A+J+D)))))||1;y=(g.height/(K.height-(u+H(I(C+E))+H(I(A+E+D)))))||1}function b(){cancelAnimationFrame(w);w=requestAnimationFrame(f)}function f(){var A=g.getBoundingClientRect();j=A.left+t;k=A.top+u}function a(A){return{x:A.clientX-j,y:A.clientY-k}}function c(A){A.x*=x;A.y*=y;return A}function d(D){var A=(h.currentTransform||h.mozCurrentTransform),C,B;if(A instanceof SVGMatrix){A=DOMMatrix.fromMatrix(A)}C=typeof A.a==="undefined"?new DOMMatrix(A):A;B=C.invertSelf();return{x:D.x*B.a+D.y*B.c+B.e,y:D.x*B.b+D.y*B.d+B.f}}function e(A){return o.applyToPoint(A.x,A.y)}this.getPos=function(A){var B=a(A);if(l){B=c(B)}if(m){B=z(B)}return B};this.getPosXY=function(B,C){var A;if(arguments.length===1){C=B.y;A=B.x}else{A=B}return r.getPos({clientX:A/x+j,clientY:C/y+k})};this.init=p;this.update=f;i(r,"handleScale",{get:function(){return l},set:function(A){l=!!A}});i(r,"handleTransforms",{get:function(){return m},set:function(A){m=!!A&&(n||q)}});i(r,"matrix",{get:function(){return q},set:function(A){q=A;m=m&&(n||q);v()}});v();p();window.addEventListener("scroll",b);window.addEventListener("resize",b)};